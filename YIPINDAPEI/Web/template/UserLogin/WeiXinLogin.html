<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>微信登录|衣品搭配</title>
    <meta name="keywords" content="微信登录|衣品搭配" />
    <meta name="description" content="微信登录|衣品搭配">
</head>
<style>
    .impowerBox {
        line-height: 1.6;
        position: relative;
        text-align: center;
        width: 100%;
        z-index: 1;

    }
    .impowerBox .title {
        font-size: 20px;
        text-align: center;
        margin-bottom:10px;
    }
    .impowerBox .qrcode {
        border: 1px solid #e2e2e2;
        margin-top: 15px;
    }
    .impowerBox .info {
        margin: 0 auto;
        width: 330px;
    }
    .impowerBox .status.status_browser {
        text-align: center;
    }
    .impowerBox .status p {
        font-size: 13px;
    }
   iframe 
   {
       width:100% !important;
       }
</style>
<body>
    <span id="login_container"></span>


    <div class="main impowerBox" id="wxlogin" style="display:none">
			<div class="loginPanel normalPanel">
				<div class="title">微信登录</div>
				<div class="waiting panelContent">
					<div class="wrp_code"> <img src="$img/thirdlogin/weixin_login.png" alt="衣品搭配" /></div>
					<div class="info">
						<div class="status status_browser js_status" id="wx_default_tip">
			                <p>请使用微信扫描二维码登录</p>
                            <p>“北京衣品搭配”</p>
			            </div>
			        </div>
				</div>
			</div>
	 </div>
</body>
</html>


    <!--当当前页面用手机打开的时候，跳转到手机端-->

    <script type="text/javascript">

        function IsPC() {
            var userAgentInfo = navigator.userAgent;
            var Agents = ["Android", "iPhone",
                    "SymbianOS", "Windows Phone",
                    "iPad", "iPod"];
            var flag = true;
            for (var v = 0; v < Agents.length; v++) {
                if (userAgentInfo.indexOf(Agents[v]) > 0) {
                    flag = false;
                    break;
                }
            }
            return flag;
        }

        //是PC端访问
        if (IsPC()) {
            document.getElementById("login_container").style.display = "block";
            document.getElementById("wxlogin").style.display = "none";
        }
        else {
            document.getElementById("login_container").style.display = "none";
            document.getElementById("wxlogin").style.display = "block";
        }

    </script>

    <!--END--> 

    <!--微信第三方登录-->

    <script src="http://res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js"></script>

    

    <script type="text/javascript">
        var obj = new WxLogin({
            id: "login_container",
            appid: "wx2fbe800be068f5ec",
            scope: "snsapi_login",
            redirect_uri: "http://www.ypindapei.com",
            state: "",
            style: "",
            href: ""
        });
    </script>

    <!--END-->

<!--
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>微信登录</title>
</head>
<body>
    <script>
        var GWC = {
            urlParams: {},
            appendParams: function (url, params) {
                if (params) {
                    var baseWithSearch = url.split('#')[0];
                    var hash = url.split('#')[1];
                    for (var key in params) {
                        var attrValue = params[key];
                        if (attrValue !== undefined) {
                            var newParam = key + "=" + attrValue;
                            if (baseWithSearch.indexOf('?') > 0) {
                                var oldParamReg = new RegExp(key + '=[-%.!~*\'\(\)\\w]*', 'g');
                                if (oldParamReg.test(baseWithSearch)) {
                                    baseWithSearch = baseWithSearch.replace(oldParamReg, newParam);
                                } else {
                                    baseWithSearch += "&" + newParam;
                                }
                            } else {
                                baseWithSearch += "?" + newParam;
                            }
                        }
                    }
                    if (hash) {
                        url = baseWithSearch + '#' + hash;
                    } else {
                        url = baseWithSearch;
                    }
                }
                return url;
            },
            getUrlParams: function () {
                var pairs = location.search.substring(1).split('&');
                for (var i = 0; i < pairs.length; i++) {
                    var pos = pairs[i].indexOf('=');
                    if (pos === -1) {
                        continue;
                    }
                    GWC.urlParams[pairs[i].substring(0, pos)] = decodeURIComponent(pairs[i].substring(pos + 1));
                }
            },
            doRedirect: function () {
                var code = GWC.urlParams['code'];
                var appId = GWC.urlParams['appid'];
                var scope = GWC.urlParams['scope'] || 'snsapi_base';
                var state = GWC.urlParams['state'];
                var redirectUri;
                if (!code) {
                    //第一步，没有拿到code，跳转至微信授权页面获取code
                    redirectUri = GWC.appendParams('https://open.weixin.qq.com/connect/oauth2/authorize#wechat_redirect', {
                        'appid': appId,
                        'redirect_uri': encodeURIComponent(location.href),
                        'response_type': 'code',
                        'scope': scope,
                        'state': state,
                    });
                } else {
                    //第二步，从微信授权页面跳转回来，已经获取到了code，再次跳转到实际所需页面
                    redirectUri = GWC.appendParams(GWC.urlParams['redirect_uri'], {
                        'code': code,
                        'state': state
                    });
                }
                location.href = redirectUri;
            }
        };
        GWC.getUrlParams();
        GWC.doRedirect();
    </script>
</body>
</html>


-->

